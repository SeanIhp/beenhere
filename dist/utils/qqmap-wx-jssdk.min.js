"use strict";var exports=module.exports={};"use strict";

var _defineProperty = require('../npm/babel-runtime/core-js/object/define-property.js');

var _defineProperty2 = _interopRequireDefault(_defineProperty);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _createClass = function () {
  function a(e, c) {
    for (var b = 0; b < c.length; b++) {
      var d = c[b];d.enumerable = d.enumerable || false;d.configurable = true;if ("value" in d) {
        d.writable = true;
      }(0, _defineProperty2.default)(e, d.key, d);
    }
  }return function (d, b, c) {
    if (b) {
      a(d.prototype, b);
    }if (c) {
      a(d, c);
    }return d;
  };
}();function _classCallCheck(a, b) {
  if (!(a instanceof b)) {
    throw new TypeError("Cannot call a class as a function");
  }
}var ERROR_CONF = { KEY_ERR: 311, KEY_ERR_MSG: "key格式错误", PARAM_ERR: 310, PARAM_ERR_MSG: "请求参数信息有误", SYSTEM_ERR: 600, SYSTEM_ERR_MSG: "系统错误", WX_ERR_CODE: 1000, WX_OK_CODE: 200 };var BASE_URL = "https://apis.map.qq.com/ws/";var URL_SEARCH = BASE_URL + "place/v1/search";var URL_SUGGESTION = BASE_URL + "place/v1/suggestion";var URL_GET_GEOCODER = BASE_URL + "geocoder/v1/";var URL_CITY_LIST = BASE_URL + "district/v1/list";var URL_AREA_LIST = BASE_URL + "district/v1/getchildren";var URL_DISTANCE = BASE_URL + "distance/v1/";var Utils = { location2query: function location2query(c) {
    if (typeof c == "string") {
      return c;
    }var b = "";for (var a = 0; a < c.length; a++) {
      var e = c[a];if (!!b) {
        b += ";";
      }if (e.location) {
        b = b + e.location.lat + "," + e.location.lng;
      }if (e.latitude && e.longitude) {
        b = b + e.latitude + "," + e.longitude;
      }
    }return b;
  }, getWXLocation: function getWXLocation(c, b, a) {
    wx.getLocation({ type: "gcj02", success: c, fail: b, complete: a });
  }, getLocationParam: function getLocationParam(b) {
    if (typeof b == "string") {
      var a = b.split(",");if (a.length === 2) {
        b = { latitude: b.split(",")[0], longitude: b.split(",")[1] };
      } else {
        b = {};
      }
    }return b;
  }, polyfillParam: function polyfillParam(a) {
    a.success = a.success || function () {};a.fail = a.fail || function () {};a.complete = a.complete || function () {};
  }, checkParamKeyEmpty: function checkParamKeyEmpty(c, b) {
    if (!c[b]) {
      var a = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + b + "参数格式有误");c.fail(a);c.complete(a);return true;
    }return false;
  }, checkKeyword: function checkKeyword(a) {
    return !this.checkParamKeyEmpty(a, "keyword");
  }, checkLocation: function checkLocation(c) {
    var a = this.getLocationParam(c.location);if (!a || !a.latitude || !a.longitude) {
      var b = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + " location参数格式有误");c.fail(b);c.complete(b);return false;
    }return true;
  }, buildErrorConfig: function buildErrorConfig(a, b) {
    return { status: a, message: b };
  }, buildWxRequestConfig: function buildWxRequestConfig(c, a) {
    var b = this;a.header = { "content-type": "application/json" };a.method = "GET";a.success = function (d) {
      var e = d.data;if (e.status === 0) {
        c.success(e);
      } else {
        c.fail(e);
      }
    };a.fail = function (d) {
      d.statusCode = ERROR_CONF.WX_ERR_CODE;c.fail(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, result.errMsg));
    };a.complete = function (d) {
      var e = +d.statusCode;switch (e) {case ERROR_CONF.WX_ERR_CODE:
          c.complete(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, d.errMsg));break;case ERROR_CONF.WX_OK_CODE:
          var f = d.data;if (f.status === 0) {
            c.complete(f);
          } else {
            c.complete(b.buildErrorConfig(f.status, f.message));
          }break;default:
          c.complete(b.buildErrorConfig(ERROR_CONF.SYSTEM_ERR, ERROR_CONF.SYSTEM_ERR_MSG));}
    };return a;
  }, locationProcess: function locationProcess(f, e, c, a) {
    var d = this;c = c || function (g) {
      g.statusCode = ERROR_CONF.WX_ERR_CODE;f.fail(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, g.errMsg));
    };a = a || function (g) {
      if (g.statusCode == ERROR_CONF.WX_ERR_CODE) {
        f.complete(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, g.errMsg));
      }
    };if (!f.location) {
      d.getWXLocation(e, c, a);
    } else {
      if (d.checkLocation(f)) {
        var b = Utils.getLocationParam(f.location);e(b);
      }
    }
  } };var QQMapWX = function () {
  function b(i) {
    _classCallCheck(this, b);if (!i.key) {
      throw Error("key值不能为空");
    }this.key = i.key;
  }_createClass(b, [{ key: "search", value: function f(i) {
      var l = this;i = i || {};Utils.polyfillParam(i);if (!Utils.checkKeyword(i)) {
        return;
      }var k = { keyword: i.keyword, orderby: i.orderby || "_distance", page_size: i.page_size || 10, page_index: i.page_index || 1, output: "json", key: l.key };if (i.address_format) {
        k.address_format = i.address_format;
      }if (i.filter) {
        k.filter = i.filter;
      }var n = i.distance || "1000";var j = i.auto_extend || 1;var m = function m(o) {
        k.boundary = "nearby(" + o.latitude + "," + o.longitude + "," + n + "," + j + ")";wx.request(Utils.buildWxRequestConfig(i, { url: URL_SEARCH, data: k }));
      };Utils.locationProcess(i, m);
    } }, { key: "getSuggestion", value: function h(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (!Utils.checkKeyword(i)) {
        return;
      }var j = { keyword: i.keyword, region: i.region || "全国", region_fix: i.region_fix || 0, policy: i.policy || 0, output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_SUGGESTION, data: j }));
    } }, { key: "reverseGeocoder", value: function a(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);var j = { coord_type: i.coord_type || 5, get_poi: i.get_poi || 0, output: "json", key: k.key };if (i.poi_options) {
        j.poi_options = i.poi_options;
      }var l = function l(m) {
        j.location = m.latitude + "," + m.longitude;wx.request(Utils.buildWxRequestConfig(i, { url: URL_GET_GEOCODER, data: j }));
      };Utils.locationProcess(i, l);
    } }, { key: "geocoder", value: function g(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "address")) {
        return;
      }var j = { address: i.address, output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_GET_GEOCODER, data: j }));
    } }, { key: "getCityList", value: function c(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);var j = { output: "json", key: k.key };
      wx.request(Utils.buildWxRequestConfig(i, { url: URL_CITY_LIST, data: j }));
    } }, { key: "getDistrictByCityId", value: function d(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "id")) {
        return;
      }var j = { id: i.id || "", output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_AREA_LIST, data: j }));
    } }, { key: "calculateDistance", value: function e(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "to")) {
        return;
      }var j = { mode: i.mode || "walking", to: Utils.location2query(i.to), output: "json", key: k.key };var l = function l(m) {
        j.from = m.latitude + "," + m.longitude;wx.request(Utils.buildWxRequestConfig(i, { url: URL_DISTANCE, data: j }));
      };if (i.from) {
        i.location = i.from;
      }Utils.locationProcess(i, l);
    } }]);return b;
}();module.exports = QQMapWX;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInFxbWFwLXd4LWpzc2RrLm1pbi5qcyJdLCJuYW1lcyI6WyJfY3JlYXRlQ2xhc3MiLCJhIiwiZSIsImMiLCJiIiwibGVuZ3RoIiwiZCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImtleSIsInByb3RvdHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsIlR5cGVFcnJvciIsIkVSUk9SX0NPTkYiLCJLRVlfRVJSIiwiS0VZX0VSUl9NU0ciLCJQQVJBTV9FUlIiLCJQQVJBTV9FUlJfTVNHIiwiU1lTVEVNX0VSUiIsIlNZU1RFTV9FUlJfTVNHIiwiV1hfRVJSX0NPREUiLCJXWF9PS19DT0RFIiwiQkFTRV9VUkwiLCJVUkxfU0VBUkNIIiwiVVJMX1NVR0dFU1RJT04iLCJVUkxfR0VUX0dFT0NPREVSIiwiVVJMX0NJVFlfTElTVCIsIlVSTF9BUkVBX0xJU1QiLCJVUkxfRElTVEFOQ0UiLCJVdGlscyIsImxvY2F0aW9uMnF1ZXJ5IiwibG9jYXRpb24iLCJsYXQiLCJsbmciLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImdldFdYTG9jYXRpb24iLCJ3eCIsImdldExvY2F0aW9uIiwidHlwZSIsInN1Y2Nlc3MiLCJmYWlsIiwiY29tcGxldGUiLCJnZXRMb2NhdGlvblBhcmFtIiwic3BsaXQiLCJwb2x5ZmlsbFBhcmFtIiwiY2hlY2tQYXJhbUtleUVtcHR5IiwiYnVpbGRFcnJvckNvbmZpZyIsImNoZWNrS2V5d29yZCIsImNoZWNrTG9jYXRpb24iLCJzdGF0dXMiLCJtZXNzYWdlIiwiYnVpbGRXeFJlcXVlc3RDb25maWciLCJoZWFkZXIiLCJtZXRob2QiLCJkYXRhIiwic3RhdHVzQ29kZSIsInJlc3VsdCIsImVyck1zZyIsImYiLCJsb2NhdGlvblByb2Nlc3MiLCJnIiwiUVFNYXBXWCIsImkiLCJFcnJvciIsInZhbHVlIiwibCIsImsiLCJrZXl3b3JkIiwib3JkZXJieSIsInBhZ2Vfc2l6ZSIsInBhZ2VfaW5kZXgiLCJvdXRwdXQiLCJhZGRyZXNzX2Zvcm1hdCIsImZpbHRlciIsIm4iLCJkaXN0YW5jZSIsImoiLCJhdXRvX2V4dGVuZCIsIm0iLCJvIiwiYm91bmRhcnkiLCJyZXF1ZXN0IiwidXJsIiwiaCIsInJlZ2lvbiIsInJlZ2lvbl9maXgiLCJwb2xpY3kiLCJjb29yZF90eXBlIiwiZ2V0X3BvaSIsInBvaV9vcHRpb25zIiwiYWRkcmVzcyIsImlkIiwibW9kZSIsInRvIiwiZnJvbSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBSUEsZUFBYSxZQUFVO0FBQUMsV0FBU0MsQ0FBVCxDQUFXQyxDQUFYLEVBQWFDLENBQWIsRUFBZTtBQUFDLFNBQUksSUFBSUMsSUFBRSxDQUFWLEVBQVlBLElBQUVELEVBQUVFLE1BQWhCLEVBQXVCRCxHQUF2QixFQUEyQjtBQUFDLFVBQUlFLElBQUVILEVBQUVDLENBQUYsQ0FBTixDQUFXRSxFQUFFQyxVQUFGLEdBQWFELEVBQUVDLFVBQUYsSUFBYyxLQUEzQixDQUFpQ0QsRUFBRUUsWUFBRixHQUFlLElBQWYsQ0FBb0IsSUFBRyxXQUFXRixDQUFkLEVBQWdCO0FBQUNBLFVBQUVHLFFBQUYsR0FBVyxJQUFYO0FBQWdCLHFDQUFzQlAsQ0FBdEIsRUFBd0JJLEVBQUVJLEdBQTFCLEVBQThCSixDQUE5QjtBQUFpQztBQUFDLFVBQU8sVUFBU0EsQ0FBVCxFQUFXRixDQUFYLEVBQWFELENBQWIsRUFBZTtBQUFDLFFBQUdDLENBQUgsRUFBSztBQUFDSCxRQUFFSyxFQUFFSyxTQUFKLEVBQWNQLENBQWQ7QUFBaUIsU0FBR0QsQ0FBSCxFQUFLO0FBQUNGLFFBQUVLLENBQUYsRUFBSUgsQ0FBSjtBQUFPLFlBQU9HLENBQVA7QUFBUyxHQUFwRTtBQUFxRSxDQUEvUCxFQUFqQixDQUFtUixTQUFTTSxlQUFULENBQXlCWCxDQUF6QixFQUEyQkcsQ0FBM0IsRUFBNkI7QUFBQyxNQUFHLEVBQUVILGFBQWFHLENBQWYsQ0FBSCxFQUFxQjtBQUFDLFVBQU0sSUFBSVMsU0FBSixDQUFjLG1DQUFkLENB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QUFXSixJQUFFQSxLQUFHLEVBQUwsQ0FBUWxDLE1BQU1nQixhQUFOLENBQW9Ca0IsQ0FBcEIsRUFBdUIsSUFBR2xDLE1BQU1pQixrQkFBTixDQUF5QmlCLENBQXpCLEVBQTJCLElBQTNCLENBQUgsRUFBb0M7QUFBQztBQUFPLFdBQUljLElBQUUsRUFBQ2dCLE1BQUs5QixFQUFFOEIsSUFBRixJQUFRLFNBQWQsRUFBd0JDLElBQUdqRSxNQUFNQyxjQUFOLENBQXFCaUMsRUFBRStCLEVBQXZCLENBQTNCLEVBQXNEdEIsUUFBTyxNQUE3RCxFQUFvRS9ELEtBQUkwRCxFQUFFMUQsR0FBMUUsRUFBTixDQUFxRixJQUFJeUQsSUFBRSxTQUFTQSxDQUFULENBQVdhLENBQVgsRUFBYTtBQUFDRixVQUFFa0IsSUFBRixHQUFPaEIsRUFBRTdDLFFBQUYsR0FBVyxHQUFYLEdBQWU2QyxFQUFFNUMsU0FBeEIsQ0FBa0NFLEdBQUc2QyxPQUFILENBQVdyRCxNQUFNdUIsb0JBQU4sQ0FBMkJXLENBQTNCLEVBQTZCLEVBQUNvQixLQUFJdkQsWUFBTCxFQUFrQjJCLE1BQUtzQixDQUF2QixFQUE3QixDQUFYO0FBQW9FLE9BQTFILENBQTJILElBQUdkLEVBQUVnQyxJQUFMLEVBQVU7QUFBQ2hDLFVBQUVoQyxRQUFGLEdBQVdnQyxFQUFFZ0MsSUFBYjtBQUFrQixhQUFNbkMsZUFBTixDQUFzQkcsQ0FBdEIsRUFBd0JHLENBQXhCO0FBQTJCLEtBQTNZLEVBRHVpRyxDQUFmLEVBQ3pvRixPQUFPL0QsQ0FBUDtBQUFTLENBRDZoRixFQUFaLENBQzlnRjZGLE9BQU9DLE9BQVAsR0FBZW5DLE9BQWYiLCJmaWxlIjoidW5rbm93biIsInNvdXJjZXNDb250ZW50IjpbInZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGUsYyl7Zm9yKHZhciBiPTA7YjxjLmxlbmd0aDtiKyspe3ZhciBkPWNbYl07ZC5lbnVtZXJhYmxlPWQuZW51bWVyYWJsZXx8ZmFsc2U7ZC5jb25maWd1cmFibGU9dHJ1ZTtpZihcInZhbHVlXCIgaW4gZCl7ZC53cml0YWJsZT10cnVlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGQua2V5LGQpfX1yZXR1cm4gZnVuY3Rpb24oZCxiLGMpe2lmKGIpe2EoZC5wcm90b3R5cGUsYil9aWYoYyl7YShkLGMpfXJldHVybiBkfX0oKTtmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX19dmFyIEVSUk9SX0NPTkY9e0tFWV9FUlI6MzExLEtFWV9FUlJfTVNHOlwia2V55qC85byP6ZSZ6K+vXCIsUEFSQU1fRVJSOjMxMCxQQVJBTV9FUlJfTVNHOlwi6K+35rGC5Y+C5pWw5L+h5oGv5pyJ6K+vXCIsU1lTVEVNX0VSUjo2MDAsU1lTVEVNX0VSUl9NU0c6XCLns7vnu5/plJnor69cIixXWF9FUlJfQ09ERToxMDAwLFdYX09LX0NPREU6MjAwfTt2YXIgQkFTRV9VUkw9XCJodHRwczovL2FwaXMubWFwLnFxLmNvbS93cy9cIjt2YXIgVVJMX1NFQVJDSD1CQVNFX1VSTCtcInBsYWNlL3YxL3NlYXJjaFwiO3ZhciBVUkxfU1VHR0VTVElPTj1CQVNFX1VSTCtcInBsYWNlL3YxL3N1Z2dlc3Rpb25cIjt2YXIgVVJMX0dFVF9HRU9DT0RFUj1CQVNFX1VSTCtcImdlb2NvZGVyL3YxL1wiO3ZhciBVUkxfQ0lUWV9MSVNUPUJBU0VfVVJMK1wiZGlzdHJpY3QvdjEvbGlzdFwiO3ZhciBVUkxfQVJFQV9MSVNUPUJBU0VfVVJMK1wiZGlzdHJpY3QvdjEvZ2V0Y2hpbGRyZW5cIjt2YXIgVVJMX0RJU1RBTkNFPUJBU0VfVVJMK1wiZGlzdGFuY2UvdjEvXCI7dmFyIFV0aWxzPXtsb2NhdGlvbjJxdWVyeTpmdW5jdGlvbiBsb2NhdGlvbjJxdWVyeShjKXtpZih0eXBlb2YgYz09XCJzdHJpbmdcIil7cmV0dXJuIGN9dmFyIGI9XCJcIjtmb3IodmFyIGE9MDthPGMubGVuZ3RoO2ErKyl7dmFyIGU9Y1thXTtpZighIWIpe2IrPVwiO1wifWlmKGUubG9jYXRpb24pe2I9YitlLmxvY2F0aW9uLmxhdCtcIixcIitlLmxvY2F0aW9uLmxuZ31pZihlLmxhdGl0dWRlJiZlLmxvbmdpdHVkZSl7Yj1iK2UubGF0aXR1ZGUrXCIsXCIrZS5sb25naXR1ZGV9fXJldHVybiBifSxnZXRXWExvY2F0aW9uOmZ1bmN0aW9uIGdldFdYTG9jYXRpb24oYyxiLGEpe3d4LmdldExvY2F0aW9uKHt0eXBlOlwiZ2NqMDJcIixzdWNjZXNzOmMsZmFpbDpiLGNvbXBsZXRlOmF9KX0sZ2V0TG9jYXRpb25QYXJhbTpmdW5jdGlvbiBnZXRMb2NhdGlvblBhcmFtKGIpe2lmKHR5cGVvZiBiPT1cInN0cmluZ1wiKXt2YXIgYT1iLnNwbGl0KFwiLFwiKTtpZihhLmxlbmd0aD09PTIpe2I9e2xhdGl0dWRlOmIuc3BsaXQoXCIsXCIpWzBdLGxvbmdpdHVkZTpiLnNwbGl0KFwiLFwiKVsxXX19ZWxzZXtiPXt9fX1yZXR1cm4gYn0scG9seWZpbGxQYXJhbTpmdW5jdGlvbiBwb2x5ZmlsbFBhcmFtKGEpe2Euc3VjY2Vzcz1hLnN1Y2Nlc3N8fGZ1bmN0aW9uKCl7fTthLmZhaWw9YS5mYWlsfHxmdW5jdGlvbigpe307YS5jb21wbGV0ZT1hLmNvbXBsZXRlfHxmdW5jdGlvbigpe319LGNoZWNrUGFyYW1LZXlFbXB0eTpmdW5jdGlvbiBjaGVja1BhcmFtS2V5RW1wdHkoYyxiKXtpZighY1tiXSl7dmFyIGE9dGhpcy5idWlsZEVycm9yQ29uZmlnKEVSUk9SX0NPTkYuUEFSQU1fRVJSLEVSUk9SX0NPTkYuUEFSQU1fRVJSX01TRytiK1wi5Y+C5pWw5qC85byP5pyJ6K+vXCIpO2MuZmFpbChhKTtjLmNvbXBsZXRlKGEpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0sY2hlY2tLZXl3b3JkOmZ1bmN0aW9uIGNoZWNrS2V5d29yZChhKXtyZXR1cm4gIXRoaXMuY2hlY2tQYXJhbUtleUVtcHR5KGEsXCJrZXl3b3JkXCIpfSxjaGVja0xvY2F0aW9uOmZ1bmN0aW9uIGNoZWNrTG9jYXRpb24oYyl7dmFyIGE9dGhpcy5nZXRMb2NhdGlvblBhcmFtKGMubG9jYXRpb24pO2lmKCFhfHwhYS5sYXRpdHVkZXx8IWEubG9uZ2l0dWRlKXt2YXIgYj10aGlzLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5QQVJBTV9FUlIsRVJST1JfQ09ORi5QQVJBTV9FUlJfTVNHK1wiIGxvY2F0aW9u5Y+C5pWw5qC85byP5pyJ6K+vXCIpO2MuZmFpbChiKTtjLmNvbXBsZXRlKGIpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sYnVpbGRFcnJvckNvbmZpZzpmdW5jdGlvbiBidWlsZEVycm9yQ29uZmlnKGEsYil7cmV0dXJue3N0YXR1czphLG1lc3NhZ2U6Yn19LGJ1aWxkV3hSZXF1ZXN0Q29uZmlnOmZ1bmN0aW9uIGJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGMsYSl7dmFyIGI9dGhpczthLmhlYWRlcj17XCJjb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn07YS5tZXRob2Q9XCJHRVRcIjthLnN1Y2Nlc3M9ZnVuY3Rpb24oZCl7dmFyIGU9ZC5kYXRhO2lmKGUuc3RhdHVzPT09MCl7Yy5zdWNjZXNzKGUpfWVsc2V7Yy5mYWlsKGUpfX07YS5mYWlsPWZ1bmN0aW9uKGQpe2Quc3RhdHVzQ29kZT1FUlJPUl9DT05GLldYX0VSUl9DT0RFO2MuZmFpbChiLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5XWF9FUlJfQ09ERSxyZXN1bHQuZXJyTXNnKSl9O2EuY29tcGxldGU9ZnVuY3Rpb24oZCl7dmFyIGU9K2Quc3RhdHVzQ29kZTtzd2l0Y2goZSl7Y2FzZSBFUlJPUl9DT05GLldYX0VSUl9DT0RFOmMuY29tcGxldGUoYi5idWlsZEVycm9yQ29uZmlnKEVSUk9SX0NPTkYuV1hfRVJSX0NPREUsZC5lcnJNc2cpKTticmVhaztjYXNlIEVSUk9SX0NPTkYuV1hfT0tfQ09ERTp2YXIgZj1kLmRhdGE7aWYoZi5zdGF0dXM9PT0wKXtjLmNvbXBsZXRlKGYpfWVsc2V7Yy5jb21wbGV0ZShiLmJ1aWxkRXJyb3JDb25maWcoZi5zdGF0dXMsZi5tZXNzYWdlKSl9YnJlYWs7ZGVmYXVsdDpjLmNvbXBsZXRlKGIuYnVpbGRFcnJvckNvbmZpZyhFUlJPUl9DT05GLlNZU1RFTV9FUlIsRVJST1JfQ09ORi5TWVNURU1fRVJSX01TRykpfX07cmV0dXJuIGF9LGxvY2F0aW9uUHJvY2VzczpmdW5jdGlvbiBsb2NhdGlvblByb2Nlc3MoZixlLGMsYSl7dmFyIGQ9dGhpcztjPWN8fGZ1bmN0aW9uKGcpe2cuc3RhdHVzQ29kZT1FUlJPUl9DT05GLldYX0VSUl9DT0RFO2YuZmFpbChkLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5XWF9FUlJfQ09ERSxnLmVyck1zZykpfTthPWF8fGZ1bmN0aW9uKGcpe2lmKGcuc3RhdHVzQ29kZT09RVJST1JfQ09ORi5XWF9FUlJfQ09ERSl7Zi5jb21wbGV0ZShkLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5XWF9FUlJfQ09ERSxnLmVyck1zZykpfX07aWYoIWYubG9jYXRpb24pe2QuZ2V0V1hMb2NhdGlvbihlLGMsYSl9ZWxzZXtpZihkLmNoZWNrTG9jYXRpb24oZikpe3ZhciBiPVV0aWxzLmdldExvY2F0aW9uUGFyYW0oZi5sb2NhdGlvbik7ZShiKX19fX07dmFyIFFRTWFwV1g9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGkpe19jbGFzc0NhbGxDaGVjayh0aGlzLGIpO2lmKCFpLmtleSl7dGhyb3cgRXJyb3IoXCJrZXnlgLzkuI3og73kuLrnqbpcIil9dGhpcy5rZXk9aS5rZXl9X2NyZWF0ZUNsYXNzKGIsW3trZXk6XCJzZWFyY2hcIix2YWx1ZTpmdW5jdGlvbiBmKGkpe3ZhciBsPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKCFVdGlscy5jaGVja0tleXdvcmQoaSkpe3JldHVybn12YXIgaz17a2V5d29yZDppLmtleXdvcmQsb3JkZXJieTppLm9yZGVyYnl8fFwiX2Rpc3RhbmNlXCIscGFnZV9zaXplOmkucGFnZV9zaXplfHwxMCxwYWdlX2luZGV4OmkucGFnZV9pbmRleHx8MSxvdXRwdXQ6XCJqc29uXCIsa2V5Omwua2V5fTtpZihpLmFkZHJlc3NfZm9ybWF0KXtrLmFkZHJlc3NfZm9ybWF0PWkuYWRkcmVzc19mb3JtYXR9aWYoaS5maWx0ZXIpe2suZmlsdGVyPWkuZmlsdGVyfXZhciBuPWkuZGlzdGFuY2V8fFwiMTAwMFwiO3ZhciBqPWkuYXV0b19leHRlbmR8fDE7dmFyIG09ZnVuY3Rpb24gbShvKXtrLmJvdW5kYXJ5PVwibmVhcmJ5KFwiK28ubGF0aXR1ZGUrXCIsXCIrby5sb25naXR1ZGUrXCIsXCIrbitcIixcIitqK1wiKVwiO3d4LnJlcXVlc3QoVXRpbHMuYnVpbGRXeFJlcXVlc3RDb25maWcoaSx7dXJsOlVSTF9TRUFSQ0gsZGF0YTprfSkpfTtVdGlscy5sb2NhdGlvblByb2Nlc3MoaSxtKX19LHtrZXk6XCJnZXRTdWdnZXN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24gaChpKXt2YXIgaz10aGlzO2k9aXx8e307VXRpbHMucG9seWZpbGxQYXJhbShpKTtpZighVXRpbHMuY2hlY2tLZXl3b3JkKGkpKXtyZXR1cm59dmFyIGo9e2tleXdvcmQ6aS5rZXl3b3JkLHJlZ2lvbjppLnJlZ2lvbnx8XCLlhajlm71cIixyZWdpb25fZml4OmkucmVnaW9uX2ZpeHx8MCxwb2xpY3k6aS5wb2xpY3l8fDAsb3V0cHV0OlwianNvblwiLGtleTprLmtleX07d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX1NVR0dFU1RJT04sZGF0YTpqfSkpfX0se2tleTpcInJldmVyc2VHZW9jb2RlclwiLHZhbHVlOmZ1bmN0aW9uIGEoaSl7dmFyIGs9dGhpcztpPWl8fHt9O1V0aWxzLnBvbHlmaWxsUGFyYW0oaSk7dmFyIGo9e2Nvb3JkX3R5cGU6aS5jb29yZF90eXBlfHw1LGdldF9wb2k6aS5nZXRfcG9pfHwwLG91dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O2lmKGkucG9pX29wdGlvbnMpe2oucG9pX29wdGlvbnM9aS5wb2lfb3B0aW9uc312YXIgbD1mdW5jdGlvbiBsKG0pe2oubG9jYXRpb249bS5sYXRpdHVkZStcIixcIittLmxvbmdpdHVkZTt3eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfR0VUX0dFT0NPREVSLGRhdGE6an0pKX07VXRpbHMubG9jYXRpb25Qcm9jZXNzKGksbCl9fSx7a2V5OlwiZ2VvY29kZXJcIix2YWx1ZTpmdW5jdGlvbiBnKGkpe3ZhciBrPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKFV0aWxzLmNoZWNrUGFyYW1LZXlFbXB0eShpLFwiYWRkcmVzc1wiKSl7cmV0dXJufXZhciBqPXthZGRyZXNzOmkuYWRkcmVzcyxvdXRwdXQ6XCJqc29uXCIsa2V5Omsua2V5fTt3eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfR0VUX0dFT0NPREVSLGRhdGE6an0pKX19LHtrZXk6XCJnZXRDaXR5TGlzdFwiLHZhbHVlOmZ1bmN0aW9uIGMoaSl7dmFyIGs9dGhpcztpPWl8fHt9O1V0aWxzLnBvbHlmaWxsUGFyYW0oaSk7dmFyIGo9e291dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O1xyXG53eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfQ0lUWV9MSVNULGRhdGE6an0pKX19LHtrZXk6XCJnZXREaXN0cmljdEJ5Q2l0eUlkXCIsdmFsdWU6ZnVuY3Rpb24gZChpKXt2YXIgaz10aGlzO2k9aXx8e307VXRpbHMucG9seWZpbGxQYXJhbShpKTtpZihVdGlscy5jaGVja1BhcmFtS2V5RW1wdHkoaSxcImlkXCIpKXtyZXR1cm59dmFyIGo9e2lkOmkuaWR8fFwiXCIsb3V0cHV0OlwianNvblwiLGtleTprLmtleX07d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX0FSRUFfTElTVCxkYXRhOmp9KSl9fSx7a2V5OlwiY2FsY3VsYXRlRGlzdGFuY2VcIix2YWx1ZTpmdW5jdGlvbiBlKGkpe3ZhciBrPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKFV0aWxzLmNoZWNrUGFyYW1LZXlFbXB0eShpLFwidG9cIikpe3JldHVybn12YXIgaj17bW9kZTppLm1vZGV8fFwid2Fsa2luZ1wiLHRvOlV0aWxzLmxvY2F0aW9uMnF1ZXJ5KGkudG8pLG91dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O3ZhciBsPWZ1bmN0aW9uIGwobSl7ai5mcm9tPW0ubGF0aXR1ZGUrXCIsXCIrbS5sb25naXR1ZGU7d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX0RJU1RBTkNFLGRhdGE6an0pKX07aWYoaS5mcm9tKXtpLmxvY2F0aW9uPWkuZnJvbX1VdGlscy5sb2NhdGlvblByb2Nlc3MoaSxsKX19XSk7cmV0dXJuIGJ9KCk7bW9kdWxlLmV4cG9ydHM9UVFNYXBXWDsiXX0=